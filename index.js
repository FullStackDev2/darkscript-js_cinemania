import"./assets/main-DMxl8H1u.js";import"./assets/vendor-BWC8OeqA.js";const B="98ff2d6267ceea8e039422b0f46fb813",g="https://api.themoviedb.org/3",P="https://image.tmdb.org/t/p/w500",p=document.getElementById("moviesContainer"),h=document.getElementById("emptyMessage");let u="",r=1,d="";I();function I(){fetch(`${g}/trending/movie/week?api_key=${B}`).then(e=>e.json()).then(e=>{e.results.length===0?S():k(e.results)})}function k(e){h&&(h.hidden=!0),p&&(p.innerHTML="",e.slice(0,10).forEach(n=>{const t=`
      <a href="catalog_mainbody.html?id=${n.id}" class="movie-card">
        <img src="${P+n.poster_path}" alt="${n.title}">
        <h3>${n.title}</h3>
      </a>
    `;p.insertAdjacentHTML("beforeend",t)}))}function S(){p.innerHTML="",h.hidden=!1}const l=document.getElementById("yearBtn"),m=document.getElementById("yearDropdown");l&&m&&l.addEventListener("click",e=>{e.stopPropagation(),m.classList.toggle("open"),l.classList.toggle("open")});m.addEventListener("click",e=>{e.target.tagName==="LI"&&(u=e.target.dataset.year,selectedYear.textContent=e.target.textContent,m.classList.remove("open"),l.classList.remove("open"),d&&M(1))});document.addEventListener("click",()=>{m.classList.remove("open"),l.classList.remove("open")});document.querySelector(".search-input");const T=document.querySelector(".search-input1"),j=document.querySelector(".search-btn");j.addEventListener("click",()=>{if(d=T.value.trim(),r=1,!d&&!u){I();return}M(1)});function M(e=1){const n=d?`${g}/search/movie`:`${g}/discover/movie`,t=new URL(n);t.searchParams.append("api_key",B),t.searchParams.append("page",e),d&&t.searchParams.append("query",d),u&&t.searchParams.append("primary_release_year",u),fetch(t).then(o=>o.json()).then(o=>{if(!o.results||o.results.length===0){S();return}k(o.results)}).catch(o=>console.error("Arama hatası:",o))}const a=24,L=document.querySelector(".pagination-list"),D=document.querySelector(".pagination-arrow.prev"),H=document.querySelector(".pagination-arrow.next");function w(e){L.innerHTML="";const n=o=>o.toString().padStart(2,"0");let t=[];e<=3?t=[1,2,3,"...",a]:e>=a-2?t=[1,"...",a-2,a-1,a]:t=[1,"...",e,"...",a],t.forEach(o=>{const s=document.createElement("li");s.classList.add("pagination-item"),o==="..."?(s.textContent="...",s.classList.add("dots")):(s.textContent=n(o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{r=o,f()})),L.appendChild(s)})}function f(){w(r),console.log(`Şu anki sayfa: ${r}`)}D.addEventListener("click",()=>{r>1&&(r--,f())});H.addEventListener("click",()=>{r<a&&(r++,f())});w(r);const q={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",18:"Drama",10751:"Family",14:"Fantasy",27:"Horror",9648:"Mystery",878:"Sci-Fi",53:"Thriller",10749:"Romance"},v="98ff2d6267ceea8e039422b0f46fb813",y="https://api.themoviedb.org/3",x="https://image.tmdb.org/t/p/w500",F=new URLSearchParams(window.location.search);F.get("id");fetch(`${y}/trending/movie/week?api_key=${v}`).then(e=>e.json()).then(e=>{G(e.results)});function R(e){const n=Math.round(e/2);let t="";for(let o=1;o<=5;o++)t+=o<=n?"★":"☆";return t}function G(e){const n=document.getElementById("weeklyTrends");n.innerHTML="",e.slice(0,1).forEach(t=>{var E;const o=R(t.vote_average),s=t.genre_ids.map(A=>q[A]).filter(Boolean).slice(0,2).join(", "),i=t.poster_path?x+t.poster_path:"./images/no-poster.jpg",c=`
  <a href="catalog_mainbody.html?id=${t.id}" class="movie-card large">

    <img src="${i}" alt="${t.title}">

    <div class="movie-card-overlay">
      <div class="movie-card-text">
        <h3 class="movie-title">${t.title}</h3>
        <p class="movie-meta">${s} | ${(E=t.release_date)==null?void 0:E.split("-")[0]}</p>
      </div>

      <div class="movie-card-rating">
        ${o}
      </div>
    </div>
     </a>
    `;n.insertAdjacentHTML("beforeend",c)})}U();function U(){const e=new Date,n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),o=`${n}-${t}-01`,s=`${n}-${t}-31`;fetch(`${y}/discover/movie?api_key=${v}&language=en-US&primary_release_date.gte=${o}&primary_release_date.lte=${s}&sort_by=popularity.desc`).then(i=>i.json()).then(i=>{if(!i.results||i.results.length===0){console.warn("Ayın filmi bulunamadı");return}const c=i.results[0];Y(c.id)})}function Y(e){fetch(`${y}/movie/${e}?api_key=${v}&language=en-US`).then(n=>n.json()).then(n=>{N(n)})}function N(e){document.getElementById("movieTitle").textContent=e.title,document.getElementById("movieDate").textContent=e.release_date.split("-").reverse().join("."),document.getElementById("movieGenre").textContent=e.genres.map(s=>s.name).join(", "),document.getElementById("moviePopularity").textContent=e.popularity.toFixed(1);const n=document.getElementById("heroBackdrop");n&&e.backdrop_path&&(n.src=x+e.backdrop_path);const t=(s,i)=>{const c=document.getElementById(s);c&&(c.textContent=i)},o=e.genres.map(s=>s.name).join(", ");t("movieDate",e.release_date),t("movieVote",`${e.vote_average.toFixed(1)} / ${e.vote_count}`),document.getElementById("movieDate").textContent=e.release_date.split("-").reverse().join("."),document.getElementById("movieGenre").textContent=e.genres.map(s=>s.name).join(", "),document.getElementById("movieVoteAvg").textContent=e.vote_average.toFixed(1),document.getElementById("movieVoteCount").textContent=e.vote_count,document.getElementById("moviePopularity").textContent=e.popularity.toFixed(1),t("moviePopularity",e.popularity.toFixed(1)),t("movieGenre",o),t("movieOverview",e.overview)}document.getElementById("movieTitle").textContent=movie.title;let $=[];const b="98ff2d6267ceea8e039422b0f46fb813",V="https://api.themoviedb.org/3/trending/movie/day";document.getElementById("emptySection");document.getElementById("movieList");document.addEventListener("DOMContentLoaded",()=>{K(),W()});function K(){fetch(`${V}?api_key=${b}`).then(e=>e.json()).then(e=>{$=e.results.slice(0,9),C($)}).catch(console.error)}function C(e){const n=document.getElementById("movieList");n&&(n.innerHTML="",e.forEach(t=>{var s;if(!t.poster_path)return;const o=document.createElement("article");o.className="equipment-movie-card movie-card",o.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w500${t.poster_path}" alt="${t.title}">
      <div class="movie-info equipment-movie-info">
        <h3>${t.title}</h3>
        <p>${((s=t.release_date)==null?void 0:s.slice(0,4))||""}</p>
      </div>
    `,n.appendChild(o)}))}function O(e){fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${b}&with_genres=${e}`).then(n=>n.json()).then(n=>{!n.results||n.results.length===0?_():(Q(),C(n.results))}).catch(_)}function _(){const e=document.getElementById("emptySection"),n=document.getElementById("movieList");!e||!n||(e.classList.remove("hidden"),n.innerHTML="")}function Q(){const e=document.getElementById("emptySection");e&&e.classList.add("hidden")}function W(){const e=document.getElementById("genreBtn"),n=document.getElementById("genreDropdown"),t=document.getElementById("genreIcon");e.addEventListener("click",o=>{o.stopPropagation(),n.classList.toggle("active"),t.classList.toggle("rotate")}),n.addEventListener("click",o=>{if(o.target.tagName==="LI"){const s=o.target.dataset.genreId;O(s),n.classList.remove("active"),t.classList.remove("rotate")}}),document.addEventListener("click",()=>{n.classList.remove("active"),t.classList.remove("rotate")}),document.addEventListener("keydown",o=>{o.key==="Escape"&&(n.classList.remove("active"),t.classList.remove("rotate"))})}
//# sourceMappingURL=index.js.map
