import"./assets/main-B_zSWVXd.js";import"./assets/vendor-BWC8OeqA.js";const g="98ff2d6267ceea8e039422b0f46fb813",p="https://api.themoviedb.org/3",D="https://image.tmdb.org/t/p/w500";let v={};fetch(`${p}/genre/movie/list?api_key=${g}&language=en-US`).then(e=>e.json()).then(e=>{e.genres.forEach(t=>{v[t.id]=t.name})});function x(e){if(!e)return"☆☆☆☆☆";const t=Math.round(e/2);return"★".repeat(t)+"☆".repeat(5-t)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("moviesContainer"),t=document.getElementById("emptyMessage"),n=document.getElementById("yearBtn"),r=document.getElementById("yearDropdown"),l=document.getElementById("selectedYear"),a=document.querySelector(".search-input1"),i=document.querySelector(".search-btn");let c="",d="";_();function _(){fetch(`${p}/trending/movie/week?api_key=${g}`).then(o=>o.json()).then(o=>{L(o.results||[])}).catch(o=>console.error(o))}function L(o){if(e.innerHTML="",!o.length){t.hidden=!1;return}t.hidden=!0,o.forEach(s=>{const A=s.poster_path?`${D}${s.poster_path}`:"./placeholder.jpg",C=s.release_date?s.release_date.slice(0,4):"N/A",S=s.genre_ids&&Object.keys(v).length?s.genre_ids.map(j=>v[j]).filter(Boolean).slice(0,2).join(", "):"Unknown",T=x(s.vote_average),m=document.createElement("a");m.className="movie-card",m.href="#",m.innerHTML=`
      <img src="${A}" alt="${s.title}">
      <div class="movie-card-overlay">
        <div class="movie-card-text">
          <h3 class="movie-title">${s.title}</h3>
          <p class="movie-meta">${S} | ${C}</p>
        </div>
        <div class="movie-card-rating">${T}</div>
      </div>
    `,e.appendChild(m)})}n&&r&&(n.addEventListener("click",o=>{o.stopPropagation(),r.classList.toggle("open")}),r.addEventListener("click",o=>{o.target.tagName==="LI"&&(c=o.target.dataset.year||"",l.textContent=o.target.textContent,r.classList.remove("open"))}),document.addEventListener("click",()=>{r.classList.remove("open")})),i&&i.addEventListener("click",()=>{if(d=a.value.trim(),!d&&!c){_();return}b()});function b(){let o;d?(o=`${p}/search/movie?api_key=${g}&query=${encodeURIComponent(d)}`,c&&(o+=`&year=${c}`)):o=`${p}/discover/movie?api_key=${g}&primary_release_year=${c}`,fetch(o).then(s=>s.json()).then(s=>{L(s.results||[])}).catch(s=>console.error(s))}});const H={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",18:"Drama",10751:"Family",14:"Fantasy",27:"Horror",9648:"Mystery",878:"Sci-Fi",53:"Thriller",10749:"Romance"},I="98ff2d6267ceea8e039422b0f46fb813",B="https://api.themoviedb.org/3",U="https://image.tmdb.org/t/p/w500",N="https://image.tmdb.org/t/p/original";function P(e){const t=Math.round(e/2);let n="";for(let r=1;r<=5;r++)n+=r<=t?"★":"☆";return n}function G(){fetch(`${B}/trending/movie/week?api_key=${I}`).then(e=>e.json()).then(e=>{O(e.results)}).catch(e=>console.error("Weekly trends error:",e))}function O(e){const t=document.getElementById("weeklyTrends");t&&(t.innerHTML="",e.slice(0,1).forEach(n=>{var c;const r=P(n.vote_average),l=n.genre_ids.map(d=>H[d]).filter(Boolean).slice(0,2).join(", "),a=n.poster_path?U+n.poster_path:"./images/no-poster.jpg",i=`
      <a href="catalog_mainbody.html?id=${n.id}" class="movie-card large">
        <img src="${a}" alt="${n.title}">
        <div class="movie-card-overlay">
          <div class="movie-card-text">
            <h3 class="movie-title">${n.title}</h3>
            <p class="movie-meta">
              ${l} | ${(c=n.release_date)==null?void 0:c.split("-")[0]}
            </p>
          </div>
          <div class="movie-card-rating">
            ${r}
          </div>
        </div>
      </a>
    `;t.insertAdjacentHTML("beforeend",i)}))}function R(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=`${t}-${n}-01`,l=`${t}-${n}-31`;fetch(`${B}/discover/movie?api_key=${I}&language=en-US&primary_release_date.gte=${r}&primary_release_date.lte=${l}&sort_by=popularity.desc`).then(a=>a.json()).then(a=>{if(!a.results||a.results.length===0)return;const i=a.results.find(c=>c.backdrop_path);i&&Y(i)}).catch(a=>console.error("Upcoming error:",a))}function Y(e){var n;const t=document.getElementById("heroBackdrop");t&&(t.src=N+e.backdrop_path,document.getElementById("movieTitle").textContent=e.title,document.getElementById("movieDate").textContent=e.release_date.split("-").reverse().join("."),document.getElementById("movieGenre").textContent=((n=e.genres)==null?void 0:n.map(r=>r.name).join(", "))||"",document.getElementById("movieVoteAvg").textContent=e.vote_average.toFixed(1),document.getElementById("movieVoteCount").textContent=e.vote_count,document.getElementById("moviePopularity").textContent=e.popularity.toFixed(1),document.getElementById("movieOverview").textContent=e.overview)}document.addEventListener("DOMContentLoaded",()=>{G(),R()});const k="98ff2d6267ceea8e039422b0f46fb813",M="https://api.themoviedb.org/3";document.getElementById("emptySection");const y=document.getElementById("movieList");document.getElementById("moviesContainer");document.getElementById("loadMoreBtn");const E=document.getElementById("emptyState");let u=1,h=null,f={};fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=98ff2d6267ceea8e039422b0f46fb813&language=en-US").then(e=>e.json()).then(e=>{e.genres.forEach(t=>{f[t.id]=t.name})});document.addEventListener("DOMContentLoaded",()=>{F(),K()});function F(){fetch(`${M}/trending/movie/day?api_key=${k}`).then(e=>{if(!e.ok)throw new Error("HTTP error: "+e.status);return e.json()}).then(e=>{!e||!Array.isArray(e.results)||(y.innerHTML="",w(e.results.slice(0,9)))}).catch(e=>console.error("Initial fetch error:",e))}function q(e){const t=Math.round(e/2);return"★".repeat(t)+"☆".repeat(5-t)}function w(e){const t=document.getElementById("movieList");e.forEach(n=>{var c;if(!n.poster_path)return;const r=((c=n.release_date)==null?void 0:c.slice(0,4))||"N/A",l=n.genre_ids&&f?n.genre_ids.map(d=>f[d]).filter(Boolean).slice(0,2).join(", "):"Unknown",a=q(n.vote_average),i=document.createElement("article");i.className="movie-card",i.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}">
      <div class="movie-card-overlay">
        <div class="movie-card-text">
          <h3>${n.title}</h3>
          <p>${l} | ${r}</p>
        </div>
        <div class="movie-card-rating">${a}</div>
      </div>
    `,t.appendChild(i)})}genreDropdown.addEventListener("click",e=>{e.target.tagName==="LI"&&(h=e.target.dataset.genreId,u=1,y.innerHTML="",E.classList.add("hidden"),$())});function $(){h&&fetch(`${M}/discover/movie?api_key=${k}&with_genres=${h}&page=${u}`).then(e=>{if(!e.ok)throw new Error("HTTP error: "+e.status);return e.json()}).then(e=>{if(!e||!Array.isArray(e.results))return;const t=e.results.slice(0,9);if(!t.length&&u===1){E.classList.remove("hidden");return}w(t)}).catch(e=>console.error("Genre fetch error:",e))}function K(){const e=document.getElementById("genreBtn"),t=document.getElementById("genreDropdown"),n=document.getElementById("genreIcon");e.addEventListener("click",r=>{r.stopPropagation(),t.classList.toggle("active"),n.classList.toggle("rotate")}),t.addEventListener("click",r=>{r.target.tagName==="LI"&&(r.target.dataset.genreId,$(),t.classList.remove("active"),n.classList.remove("rotate"))}),document.addEventListener("click",()=>{t.classList.remove("active"),n.classList.remove("rotate")}),document.addEventListener("keydown",r=>{r.key==="Escape"&&(t.classList.remove("active"),n.classList.remove("rotate"))})}genreDropdown.addEventListener("click",e=>{e.target.tagName==="LI"&&(h=e.target.dataset.genreId,u=1,y.innerHTML="",E.classList.add("hidden"),$())});
//# sourceMappingURL=index.js.map
