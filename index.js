import"./assets/main-DMxl8H1u.js";import"./assets/vendor-BWC8OeqA.js";const $="98ff2d6267ceea8e039422b0f46fb813",g="https://api.themoviedb.org/3",C="https://image.tmdb.org/t/p/w500",u=document.getElementById("moviesContainer"),_=document.getElementById("emptyMessage");let l="",r=1,d="";B();function B(){fetch(`${g}/trending/movie/week?api_key=${$}`).then(e=>e.json()).then(e=>{e.results.length===0?k():I(e.results)})}function I(e){_.hidden=!0,u.innerHTML="",e.slice(0,10).forEach(n=>{const t=`
      <a href="catalog_mainbody.html?id=${n.id}" class="movie-card">
        <img src="${C+n.poster_path}" alt="${n.title}">
        <h3>${n.title}</h3>
      </a>
    `;u.insertAdjacentHTML("beforeend",t)})}function k(){u.innerHTML="",_.hidden=!1}const m=document.getElementById("yearBtn"),p=document.getElementById("yearDropdown"),S=document.getElementById("selectedYear");m.addEventListener("click",e=>{e.stopPropagation(),p.classList.toggle("open"),m.classList.toggle("open")});p.addEventListener("click",e=>{e.target.tagName==="LI"&&(l=e.target.dataset.year,S.textContent=e.target.textContent,p.classList.remove("open"),m.classList.remove("open"),d&&M(1))});document.addEventListener("click",()=>{p.classList.remove("open"),m.classList.remove("open")});document.querySelector(".search-input");const A=document.querySelector(".search-input1"),P=document.querySelector(".search-btn");P.addEventListener("click",()=>{if(d=A.value.trim(),r=1,!d&&!l){B();return}M(1)});function M(e=1){const n=d?`${g}/search/movie`:`${g}/discover/movie`,t=new URL(n);t.searchParams.append("api_key",$),t.searchParams.append("page",e),d&&t.searchParams.append("query",d),l&&t.searchParams.append("primary_release_year",l),fetch(t).then(o=>o.json()).then(o=>{if(!o.results||o.results.length===0){k();return}I(o.results)}).catch(o=>console.error("Arama hatası:",o))}const i=24,E=document.querySelector(".pagination-list"),j=document.querySelector(".pagination-arrow.prev"),T=document.querySelector(".pagination-arrow.next");function w(e){E.innerHTML="";const n=o=>o.toString().padStart(2,"0");let t=[];e<=3?t=[1,2,3,"...",i]:e>=i-2?t=[1,"...",i-2,i-1,i]:t=[1,"...",e,"...",i],t.forEach(o=>{const s=document.createElement("li");s.classList.add("pagination-item"),o==="..."?(s.textContent="...",s.classList.add("dots")):(s.textContent=n(o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{r=o,h()})),E.appendChild(s)})}function h(){w(r),console.log(`Şu anki sayfa: ${r}`)}j.addEventListener("click",()=>{r>1&&(r--,h())});T.addEventListener("click",()=>{r<i&&(r++,h())});w(r);const D={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",18:"Drama",10751:"Family",14:"Fantasy",27:"Horror",9648:"Mystery",878:"Sci-Fi",53:"Thriller",10749:"Romance"},v="98ff2d6267ceea8e039422b0f46fb813",y="https://api.themoviedb.org/3",x="https://image.tmdb.org/t/p/w500",F=new URLSearchParams(window.location.search);F.get("id");fetch(`${y}/trending/movie/week?api_key=${v}`).then(e=>e.json()).then(e=>{q(e.results)});function H(e){const n=Math.round(e/2);let t="";for(let o=1;o<=5;o++)t+=o<=n?"★":"☆";return t}function q(e){const n=document.getElementById("weeklyTrends");n.innerHTML="",e.slice(0,1).forEach(t=>{var f;const o=H(t.vote_average),s=t.genre_ids.map(b=>D[b]).filter(Boolean).slice(0,2).join(", "),a=t.poster_path?x+t.poster_path:"./images/no-poster.jpg",c=`
  <a href="catalog_mainbody.html?id=${t.id}" class="movie-card large">

    <img src="${a}" alt="${t.title}">

    <div class="movie-card-overlay">
      <div class="movie-card-text">
        <h3 class="movie-title">${t.title}</h3>
        <p class="movie-meta">${s} | ${(f=t.release_date)==null?void 0:f.split("-")[0]}</p>
      </div>

      <div class="movie-card-rating">
        ${o}
      </div>
    </div>
     </a>
    `;n.insertAdjacentHTML("beforeend",c)})}R();function R(){const e=new Date,n=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),o=`${n}-${t}-01`,s=`${n}-${t}-31`;fetch(`${y}/discover/movie?api_key=${v}&language=en-US&primary_release_date.gte=${o}&primary_release_date.lte=${s}&sort_by=popularity.desc`).then(a=>a.json()).then(a=>{if(!a.results||a.results.length===0){console.warn("Ayın filmi bulunamadı");return}const c=a.results[0];U(c.id)})}function U(e){fetch(`${y}/movie/${e}?api_key=${v}&language=en-US`).then(n=>n.json()).then(n=>{Y(n)})}function Y(e){document.getElementById("movieTitle").textContent=e.title,document.getElementById("movieDate").textContent=e.release_date.split("-").reverse().join("."),document.getElementById("movieGenre").textContent=e.genres.map(s=>s.name).join(", "),document.getElementById("moviePopularity").textContent=e.popularity.toFixed(1);const n=document.getElementById("heroBackdrop");n&&e.backdrop_path&&(n.src=x+e.backdrop_path);const t=(s,a)=>{const c=document.getElementById(s);c&&(c.textContent=a)},o=e.genres.map(s=>s.name).join(", ");t("movieDate",e.release_date),t("movieVote",`${e.vote_average.toFixed(1)} / ${e.vote_count}`),document.getElementById("movieDate").textContent=e.release_date.split("-").reverse().join("."),document.getElementById("movieGenre").textContent=e.genres.map(s=>s.name).join(", "),document.getElementById("movieVoteAvg").textContent=e.vote_average.toFixed(1),document.getElementById("movieVoteCount").textContent=e.vote_count,document.getElementById("moviePopularity").textContent=e.popularity.toFixed(1),t("moviePopularity",e.popularity.toFixed(1)),t("movieGenre",o),t("movieOverview",e.overview)}const G="98ff2d6267ceea8e039422b0f46fb813",N="https://api.themoviedb.org/3/trending/movie/day";fetch(`${N}?api_key=${G}`).then(e=>e.json()).then(e=>{const n=e.results.slice(0,9);V(n)}).catch(console.error);const L=document.getElementById("movieList");function V(e){L.innerHTML="",e.forEach(n=>{var o;const t=document.createElement("article");t.className="movie-card",t.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w500${n.poster_path}" alt="${n.title}">
      <div class="movie-info">
        <h3>${n.title}</h3>
        <p>${n.genre} | ${(o=n.release_date)==null?void 0:o.slice(0,4)}</p>
      </div>
    `,L.appendChild(t)})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("genreBtn"),n=document.getElementById("genreDropdown"),t=document.getElementById("genreIcon"),o=n.querySelectorAll("li");e.addEventListener("click",s=>{s.stopPropagation(),n.classList.toggle("active"),t.classList.toggle("rotate")}),o.forEach(s=>{s.addEventListener("click",a=>{a.stopPropagation(),n.classList.remove("active"),t.classList.remove("rotate")})}),document.addEventListener("click",()=>{n.classList.remove("active"),t.classList.remove("rotate")}),document.addEventListener("keydown",s=>{s.key==="Escape"&&(n.classList.remove("active"),t.classList.remove("rotate"))})});
//# sourceMappingURL=index.js.map
