import{a as O}from"./vendor-BWC8OeqA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=o(a);fetch(a.href,r)}})();function H(){const e=document.querySelector("#checkbox"),t=localStorage.getItem("theme")||"dark";if(t==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme"),!e){setTimeout(H,100);return}e.checked=t==="light",e.dataset.listenerAdded||(e.addEventListener("change",()=>{e.checked?(document.body.classList.add("light-theme"),localStorage.setItem("theme","light")):(document.body.classList.remove("light-theme"),localStorage.setItem("theme","dark"))}),e.dataset.listenerAdded="true")}console.log("[header] header.js checking in");let v=null;function D(e){v||(v=document.createElement("div"),v.className="mobile-menu-overlay",v.addEventListener("click",e),document.body.appendChild(v))}function R(){v&&(v.remove(),v=null)}function Y(e,t){t.classList.add("open"),e.setAttribute("aria-expanded","true"),D(()=>w(e,t)),document.body.style.overflow="hidden"}function w(e,t){t.classList.remove("open"),e&&e.setAttribute("aria-expanded","false"),R(),document.body.style.overflow=""}document.addEventListener("click",e=>{console.log("[header] Global click on:",e.target);const t=e.target.closest(".menu-open-btn");if(t){console.log("[header] Menu btn detected!");const n=document.querySelector(".mobile-menu");if(!n)return;console.log("[header] Menu toggle clicked"),n.classList.contains("open")?w(t,n):Y(t,n);return}if(e.target.closest(".mobile-menu .nav-link")){const n=document.querySelector(".mobile-menu"),a=document.querySelector(".menu-open-btn");n&&n.classList.contains("open")&&setTimeout(()=>w(a,n),100)}});document.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=document.querySelector(".mobile-menu"),o=document.querySelector(".menu-open-btn");t&&t.classList.contains("open")&&w(o,t)}});const G="98ff2d6267ceea8e039422b0f46fb813",F="https://api.themoviedb.org/3",N=O.create({baseURL:F,params:{api_key:G,language:"en-US"}}),K=async(e="day")=>{try{const{data:t}=await N.get(`/trending/movie/${e}`);return t.results}catch(t){throw console.error(`Trend filmler (${e}) alınamadı:`,t),t}},V=async e=>{try{const{data:t}=await N.get(`/movie/${e}`);return t}catch(t){throw console.error("Film detayları alınamadı:",t),t}};function z(e){return e[Math.floor(Math.random()*e.length)]}async function W(){const e=document.getElementById("hero-section");if(!e)return;const t=e.getAttribute("data-page");if(t==="dynamic")try{const o=await K("day");if(o&&o.length>0){const n=z(o);J(e,n)}else $(e)}catch(o){console.error("Hero yüklenirken hata:",o),$(e)}else t==="library"&&$(e)}document.addEventListener("DOMContentLoaded",()=>{W().catch(e=>console.error("initHero error:",e))});function J(e,t){const{title:o,overview:n,backdrop_path:a,vote_average:r,id:i}=t,d=()=>{const m="linear-gradient(90deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.65) 20%, rgba(0,0,0,0.0) 60%)";let u="w780";window.innerWidth>=1280?u="original":window.innerWidth>=768&&(u="w1280");let f="";if(a)f=`https://image.tmdb.org/t/p/${u}${a}`;else{const c=["../../images/background/desktop-1.jpg","../../images/background/desktop-2.jpg","../../images/background/mobile-1.jpg"],s=c[Math.floor(Math.random()*c.length)];try{f=new URL(s,import.meta.url).href}catch{f=`/src/images/background/${s.split("/").pop()}`}}e.style.backgroundImage=`${m}, url(${f})`,e.style.backgroundPosition="right center"};d(),new MutationObserver(d).observe(document.body,{attributes:!0,attributeFilter:["class"]}),window.addEventListener("resize",d),e.innerHTML=`
    <div class="container hero-content">
      <h1 class="hero-title">${o}</h1>
      <div class="hero-rating">${r.toFixed(1)}</div> 
      <p class="hero-description">${n.slice(0,220)}...</p> 
      <div class="hero-btns">
        <button type="button" class="btn-primary" id="watch-trailer">Watch trailer</button>
        <button type="button" class="btn-secondary" id="more-details">More details</button>
      </div>
    </div>
  `,document.getElementById("watch-trailer").addEventListener("click",()=>{window.dispatchEvent(new CustomEvent("openTrailerModal",{detail:{movieId:i}}))}),document.getElementById("more-details").addEventListener("click",()=>{window.dispatchEvent(new CustomEvent("openDetailsModal",{detail:{movie:t}}))})}function $(e){e.classList.add("hero-default"),e.innerHTML=`
    <div class="container hero-content">
      <h1 class="hero-title">Let’s Make Your Own Cinema</h1>
      <p class="hero-description">Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. </p>
      <button type="button" class="btn-primary" id="go-catalog">Get Started</button>
    </div>
  `;const t=["../../images/background/desktop-1.jpg","../../images/background/desktop-2.jpg","../../images/background/mobile-1.jpg"],o=t[Math.floor(Math.random()*t.length)];let n;try{n=new URL(o,import.meta.url).href}catch{n=`/src/images/background/${o.split("/").pop()}`}const a="linear-gradient(90deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.65) 20%, rgba(0,0,0,0.0) 60%)";e.style.backgroundImage=`${a}, url(${n})`,e.style.backgroundPosition="right center",document.getElementById("go-catalog").addEventListener("click",()=>{window.location.href="./catalog.html"})}const C=document.getElementById("openTeamModal"),A=document.getElementById("closeTeamModal"),l=document.getElementById("teamModal");C&&l&&C.addEventListener("click",e=>{e.preventDefault(),l.classList.add("is-open"),document.body.style.overflow="hidden"});A&&l&&A.addEventListener("click",()=>{l.classList.remove("is-open"),document.body.style.overflow="auto"});l&&l.addEventListener("click",e=>{e.target===l&&(l.classList.remove("is-open"),document.body.style.overflow="auto")});window.addEventListener("keydown",e=>{e.key==="Escape"&&l&&l.classList.contains("is-open")&&(l.classList.remove("is-open"),document.body.style.overflow="auto")});const q="myLibrary";function _(){try{const e=localStorage.getItem(q);return e?JSON.parse(e):[]}catch(e){return console.error("localStorage read error",e),[]}}function U(e){try{localStorage.setItem(q,JSON.stringify(e))}catch(t){console.error("localStorage write error",t)}}function j(e){return _().some(o=>Number(o.id)===Number(e))}function X(e){const t=_();t.some(o=>Number(o.id)===Number(e.id))||(t.push(e),U(t))}function Q(e){let t=_();t=t.filter(o=>Number(o.id)!==Number(e)),U(t)}function Z(){if(document.querySelector(".backdrop"))return;const e=document.createElement("div");e.className="backdrop is-hidden",e.setAttribute("data-modal","");const t=document.createElement("div");t.className="modal",t.innerHTML=`
    <button type="button" class="modal-close-btn" data-modal-close>
      <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 8L22 22" stroke="black" stroke-width="2"/>
        <path d="M8 22L22 8" stroke="black" stroke-width="2"/>
      </svg>
    </button>
    <div class="modal-content" id="modal-content"></div>
  `,e.appendChild(t),document.body.appendChild(e);const o=t.querySelector("[data-modal-close]");e.addEventListener("click",n=>{n.target===e&&I()}),o.addEventListener("click",I),document.addEventListener("keydown",n=>{n.key==="Escape"&&I()})}function I(){const e=document.querySelector(".backdrop");if(e){e.classList.add("is-hidden"),document.body.classList.remove("modal-open");const t=document.getElementById("modal-content");t&&(t.innerHTML="")}}Z();async function ee(e){const t=document.querySelector(".backdrop"),o=document.getElementById("modal-content");o.innerHTML='<div style="display:flex; justify-content:center; align-items:center; height:200px;">Loading details...</div>',t.classList.remove("is-hidden"),document.body.classList.add("modal-open");try{const n=await V(e),a=n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:"https://via.placeholder.com/300x450?text=No+Image",r=n.genres?n.genres.map(u=>u.name).join(", "):"Unknown",i=j(n.id),d=n.release_date?n.release_date.slice(0,4):"N/A",h=`
      <div class="modal-img-wrapper">
        <img src="${a}" alt="${n.title}" class="modal-img" />
      </div>
      
      <div class="modal-info">
        <h2 class="modal-title">${n.title.toUpperCase()}</h2>
        
        <div class="modal-stats">
          <div class="stats-item">
            <span class="stats-key">Vote / Votes</span>
            <span class="stats-value">
              <span class="vote-average">${n.vote_average.toFixed(1)}</span> / 
              <span class="vote-count">${n.vote_count}</span>
            </span>
          </div>
          <div class="stats-item">
            <span class="stats-key">Popularity</span>
            <span class="stats-value">${n.popularity.toFixed(1)}</span>
          </div>
          <div class="stats-item">
            <span class="stats-key">Genre</span>
            <span class="stats-value">${r}</span>
          </div>
        </div>

        <h3 class="modal-about-title">ABOUT</h3>
        <p class="modal-about-text">${n.overview||"No description available."}</p>

        <div class="modal-buttons">
          <button type="button" class="btn-modal btn-add-library ${i?"active":""}" id="modal-library-btn">
            ${i?"Remove from library":"Add to my library"}
          </button>
        </div>
      </div>
    `;o.innerHTML=h;const m=document.getElementById("modal-library-btn");m.addEventListener("click",()=>{if(j(n.id))Q(n.id),m.textContent="Add to my library",m.classList.remove("active");else{const u={id:n.id,title:n.title,poster_path:n.poster_path,vote_average:n.vote_average,release_date:n.release_date,genres:n.genres};X(u),m.textContent="Remove from library",m.classList.add("active")}})}catch(n){console.error("Modal Hatası:",n),o.innerHTML='<p style="text-align:center; padding:20px;">Error loading movie details.</p>'}}const te=["weeklyTrends","moviesContainer","catalog-list","movieList"];te.forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("click",o=>{const n=o.target.closest(".movie-card")||o.target.closest(".movie-card-overlay");if(n&&n.dataset.id){o.preventDefault();const a=n.dataset.id;ee(a)}})});class ne{constructor({containerId:t,totalItems:o,itemsPerPage:n,onPageChange:a,currentPage:r=1}){this.container=document.getElementById(t),this.totalItems=o,this.itemsPerPage=n,this.currentPage=r,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage),this.onPageChange=a,this.render()}pad(t){return String(t).padStart(2,"0")}goToPage(t){t<1||t>this.totalPages||t===this.currentPage||(this.currentPage=t,this.render(),this.onPageChange&&this.onPageChange(this.currentPage))}render(){if(this.totalPages<=1){this.container.innerHTML="";return}let t=`<button class="pagination-btn pagination-arrow prev-btn" ${this.currentPage===1?"disabled":""}>
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.6666 8H3.33325" stroke="currentColor" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M7.99992 12.6667L3.33325 8.00004L7.99992 3.33337" stroke="currentColor" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>`;this.getPaginationRange().forEach(n=>{if(n==="...")t+='<span class="pagination-dots">...</span>';else{const a=n===this.currentPage?"active":"";t+=`<button class="pagination-btn pagination-number ${a}" data-page="${n}">${this.pad(n)}</button>`}}),t+=`<button class="pagination-btn pagination-arrow next-btn" ${this.currentPage===this.totalPages?"disabled":""}>
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3.33341 8H12.6667" stroke="currentColor" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8.00008 12.6667L12.6667 8.00004L8.00008 3.33337" stroke="currentColor" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>`,this.container.innerHTML=t,this.addEventListeners()}getPaginationRange(){const t=this.totalPages,o=this.currentPage,n=[],a=3;let r=o-1,i=o+1;r<1&&(r=1,i=Math.min(a,t)),i>t&&(i=t,r=Math.max(1,t-a+1)),r>1&&n.push("...");for(let d=r;d<=i;d++)n.push(d);return i<t&&n.push("..."),n}addEventListeners(){this.container.querySelectorAll(".pagination-number").forEach(n=>{n.addEventListener("click",()=>this.goToPage(parseInt(n.dataset.page)))});const t=this.container.querySelector(".prev-btn"),o=this.container.querySelector(".next-btn");t&&t.addEventListener("click",()=>this.goToPage(this.currentPage-1)),o&&o.addEventListener("click",()=>this.goToPage(this.currentPage+1))}}const k="98ff2d6267ceea8e039422b0f46fb813",E="https://api.themoviedb.org/3",oe="https://image.tmdb.org/t/p/w500";let P="trending",L="",y="",S={};fetch(`${E}/genre/movie/list?api_key=${k}&language=en-US`).then(e=>e.json()).then(e=>{e.genres.forEach(t=>{S[t.id]=t.name})});function ae(e){if(!e)return"☆☆☆☆☆";const t=Math.round(e/2);return"★".repeat(t)+"☆".repeat(5-t)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("moviesContainer");if(!e)return;const t=document.getElementById("emptyMessage"),o=document.getElementById("pagination"),n=document.getElementById("yearBtn"),a=document.getElementById("yearDropdown"),r=document.getElementById("selectedYear"),i=document.querySelector(".search-input1"),d=document.querySelector(".search-btn");h(1);function h(c=1){P="trending",fetch(`${E}/trending/movie/week?api_key=${k}&page=${c}`).then(s=>s.json()).then(s=>{u(s.results||[]),f(s.total_results,c)}).catch(s=>console.error(s))}function m(c=1){P="search";let s;L?(s=`${E}/search/movie?api_key=${k}&query=${encodeURIComponent(L)}&page=${c}`,y&&(s+=`&year=${y}`)):s=`${E}/discover/movie?api_key=${k}&primary_release_year=${y}&page=${c}`,fetch(s).then(g=>g.json()).then(g=>{u(g.results||[]),f(g.total_results,c)}).catch(g=>console.error(g))}function u(c){if(e){if(e.innerHTML="",!c.length){t.hidden=!1,o&&(o.innerHTML="");return}t.hidden=!0,c.forEach(s=>{const g=s.poster_path?`${oe}${s.poster_path}`:"./placeholder.jpg",T=s.release_date?s.release_date.slice(0,4):"N/A",x=s.genre_ids&&Object.keys(S).length?s.genre_ids.map(b=>S[b]).filter(Boolean).slice(0,2).join(", "):"Unknown",M=ae(s.vote_average),p=document.createElement("a");p.className="movie-card",p.dataset.id=s.id,p.href="#",p.innerHTML=`
        <img src="${g}" alt="${s.title}" loading="lazy">
        <div class="movie-card-overlay">
          <div class="movie-card-text">
            <h3 class="movie-title">${s.title}</h3>
            <p class="movie-meta">${x} | ${T}</p>
          </div>
          <div class="movie-card-rating">${M}</div>
        </div>
      `,e.appendChild(p)})}}function f(c,s){const M=c>480?480:c;new ne({containerId:"pagination",totalItems:M,itemsPerPage:20,currentPage:s,onPageChange:p=>{console.log("Sayfa Değişiyor -> Yeni Sayfa:",p),P==="trending"?h(p):m(p);const b=document.querySelector(".movie-list");b&&b.scrollIntoView({behavior:"smooth"})}})}n&&a&&(n.addEventListener("click",c=>{c.stopPropagation(),a.classList.toggle("open")}),a.addEventListener("click",c=>{c.target.tagName==="LI"&&(y=c.target.dataset.year||"",r.textContent=c.target.textContent,a.classList.remove("open"))}),document.addEventListener("click",()=>a.classList.remove("open"))),d&&d.addEventListener("click",()=>{if(L=i.value.trim(),!L&&!y){h(1);return}m(1)}),i&&i.addEventListener("keypress",c=>{c.key==="Enter"&&d.click()})});const re="98ff2d6267ceea8e039422b0f46fb813",se="https://api.themoviedb.org/3";document.getElementById("emptySection");const ie=document.getElementById("movieList");document.getElementById("moviesContainer");document.getElementById("loadMoreBtn");document.getElementById("emptyState");let B={};fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=98ff2d6267ceea8e039422b0f46fb813&language=en-US").then(e=>e.json()).then(e=>{e.genres.forEach(t=>{B[t.id]=t.name})});document.addEventListener("DOMContentLoaded",()=>{document.getElementById("movieList")&&(ce(),me())});function ce(){fetch(`${se}/trending/movie/day?api_key=${re}`).then(e=>{if(!e.ok)throw new Error("HTTP error: "+e.status);return e.json()}).then(e=>{!e||!Array.isArray(e.results)||(ie.innerHTML="",le(e.results.slice(0,9)))}).catch(e=>console.error("Initial fetch error:",e))}function de(e){const t=Math.round(e/2);return"★".repeat(t)+"☆".repeat(5-t)}function le(e){const t=document.getElementById("movieList");e.forEach(o=>{var d;if(!o.poster_path)return;const n=((d=o.release_date)==null?void 0:d.slice(0,4))||"N/A",a=o.genre_ids&&B?o.genre_ids.map(h=>B[h]).filter(Boolean).slice(0,2).join(", "):"Unknown",r=de(o.vote_average),i=document.createElement("article");i.className="movie-card",i.dataset.id=o.id,i.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w500${o.poster_path}" alt="${o.title}">
      <div class="movie-card-overlay">
        <div class="movie-card-text">
          <h3>${o.title}</h3>
          <p>${a} | ${n}</p>
        </div>
        <div class="movie-card-rating">${r}</div>
      </div>
    `,t.appendChild(i)})}function me(){const e=document.getElementById("genreBtn"),t=document.getElementById("genreDropdown"),o=document.getElementById("genreIcon");e.addEventListener("click",n=>{n.stopPropagation(),t.classList.toggle("active"),o.classList.toggle("rotate")}),t.addEventListener("click",n=>{n.target.tagName==="LI"&&(n.target.dataset.genreId,t.classList.remove("active"),o.classList.remove("rotate"))}),document.addEventListener("click",()=>{t.classList.remove("active"),o.classList.remove("rotate")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(t.classList.remove("active"),o.classList.remove("rotate"))})}H();
//# sourceMappingURL=main-C19e23Kp.js.map
