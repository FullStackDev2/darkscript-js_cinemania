import{a as R}from"./vendor-BWC8OeqA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#checkbox"),t=localStorage.getItem("theme");if(t==="light"?document.body.classList.add("light-mode"):document.body.classList.remove("light-mode"),!e)return;e.checked=t==="light";function r(n){n.target.checked?(document.body.classList.add("light-mode"),localStorage.setItem("theme","light")):(document.body.classList.remove("light-mode"),localStorage.setItem("theme","dark"))}e.addEventListener("change",r,!1)});console.log("[header] header.js checking in");let m=null;function G(e){m||(m=document.createElement("div"),m.className="mobile-menu-overlay",m.addEventListener("click",e),document.body.appendChild(m))}function F(){m&&(m.remove(),m=null)}function K(e,t){t.classList.add("open"),e.setAttribute("aria-expanded","true"),G(()=>L(e,t)),document.body.style.overflow="hidden"}function L(e,t){t.classList.remove("open"),e&&e.setAttribute("aria-expanded","false"),F(),document.body.style.overflow=""}document.addEventListener("click",e=>{console.log("[header] Global click on:",e.target);const t=e.target.closest(".menu-open-btn");if(t){console.log("[header] Menu btn detected!");const n=document.querySelector(".mobile-menu");if(!n)return;console.log("[header] Menu toggle clicked"),n.classList.contains("open")?L(t,n):K(t,n);return}if(e.target.closest(".mobile-menu .nav-link")){const n=document.querySelector(".mobile-menu"),o=document.querySelector(".menu-open-btn");n&&n.classList.contains("open")&&setTimeout(()=>L(o,n),100)}});document.addEventListener("keydown",e=>{if(e.key==="Escape"){const t=document.querySelector(".mobile-menu"),r=document.querySelector(".menu-open-btn");t&&t.classList.contains("open")&&L(r,t)}});const V="98ff2d6267ceea8e039422b0f46fb813",W="https://api.themoviedb.org/3",y=R.create({baseURL:W,params:{api_key:V,language:"en-US"}}),z=async(e="day")=>{try{const{data:t}=await y.get(`/trending/movie/${e}`);return t.results}catch(t){throw console.error(`Trend filmler (${e}) alınamadı:`,t),t}},J=async e=>{try{const{data:t}=await y.get(`/movie/${e}`);return t}catch(t){throw console.error("Film detayları alınamadı:",t),t}},Q=async e=>{try{const{data:t}=await y.get(`/movie/${e}/videos`);return t.results.filter(r=>r.site==="YouTube"&&r.type==="Trailer")}catch(t){throw console.error("Film fragmanı bulunamadı:",t),t}},X=async(e=1)=>{try{const{data:t}=await y.get("/movie/upcoming",{params:{page:e}});return t}catch(t){throw console.error("Gelecek filmler alınamadı:",t),t}},Z=async()=>{try{const{data:e}=await y.get("/genre/movie/list");return e.genres}catch(e){throw console.error("Tür listesi alınamadı:",e),e}};function ee(e){return e[Math.floor(Math.random()*e.length)]}async function te(){const e=document.getElementById("hero-section");if(!e)return;const t=e.getAttribute("data-page");if(t==="dynamic")try{const r=await z("day");if(r&&r.length>0){const n=ee(r);ne(e,n)}else w(e)}catch(r){console.error("Hero yüklenirken hata:",r),w(e)}else t==="library"&&w(e)}document.addEventListener("DOMContentLoaded",()=>{te().catch(e=>console.error("initHero error:",e))});function ne(e,t){const{title:r,overview:n,backdrop_path:o,vote_average:a,id:i}=t,l=()=>{const h="linear-gradient(90deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.65) 20%, rgba(0,0,0,0.0) 60%)";let u="w780";window.innerWidth>=1280?u="original":window.innerWidth>=768&&(u="w1280");let g="";if(o)g=`https://image.tmdb.org/t/p/${u}${o}`;else{const s=["../../images/background/desktop-1.jpg","../../images/background/desktop-2.jpg","../../images/background/mobile-1.jpg"],c=s[Math.floor(Math.random()*s.length)];try{g=new URL(c,import.meta.url).href}catch{g=`/src/images/background/${c.split("/").pop()}`}}e.style.backgroundImage=`${h}, url(${g})`,e.style.backgroundPosition="right center"};l(),new MutationObserver(l).observe(document.body,{attributes:!0,attributeFilter:["class"]}),window.addEventListener("resize",l),e.innerHTML=`
    <div class="container hero-content">
      <h1 class="hero-title">${r}</h1>
      <div class="hero-rating">${a.toFixed(1)}</div> 
      <p class="hero-description">${n.slice(0,220)}...</p> 
      <div class="hero-btns">
        <button type="button" class="btn-primary" id="watch-trailer">Watch trailer</button>
        <button type="button" class="btn-secondary" id="more-details">More details</button>
      </div>
    </div>
  `,document.getElementById("watch-trailer").addEventListener("click",()=>{window.dispatchEvent(new CustomEvent("openTrailerModal",{detail:{movieId:i}}))}),document.getElementById("more-details").addEventListener("click",()=>{window.dispatchEvent(new CustomEvent("openDetailsModal",{detail:{movie:t}}))})}function w(e){e.classList.add("hero-default"),e.innerHTML=`
    <div class="container hero-content">
      <h1 class="hero-title">Let’s Make Your Own Cinema</h1>
      <p class="hero-description">Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. </p>
      <button type="button" class="btn-primary" id="go-catalog">Get Started</button>
    </div>
  `;const t=["../../images/background/desktop-1.jpg","../../images/background/desktop-2.jpg","../../images/background/mobile-1.jpg"],r=t[Math.floor(Math.random()*t.length)];let n;try{n=new URL(r,import.meta.url).href}catch{n=`/src/images/background/${r.split("/").pop()}`}const o="linear-gradient(90deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.65) 20%, rgba(0,0,0,0.0) 60%)";e.style.backgroundImage=`${o}, url(${n})`,e.style.backgroundPosition="right center",document.getElementById("go-catalog").addEventListener("click",()=>{window.location.href="./catalog.html"})}async function re(){try{const e=await Z(),r=(await X()).results[0],n=r.genre_ids.map(i=>{var l;return(l=e.find(d=>d.id===i))==null?void 0:l.name}).filter(i=>i).slice(0,2).join(", ");document.getElementById("movieTitle").textContent=r.title,document.getElementById("movieGenre").textContent=n||"Drama",document.getElementById("movieDate").textContent=r.release_date.split("-")[0],document.getElementById("heroBackdrop").src=`https://image.tmdb.org/t/p/original${r.poster_path}`;const o=document.getElementById("movieRating"),a=Math.round(r.vote_average/2);o.innerHTML="★".repeat(a)+"☆".repeat(5-a)}catch(e){console.error("Yükleme hatası:",e)}}re();const oe=document.getElementById("openTeamModal"),ae=document.getElementById("closeTeamModal"),p=document.getElementById("teamModal");oe.addEventListener("click",()=>{p.style.display="flex"});ae.addEventListener("click",()=>{p.style.display="none"});p.addEventListener("click",e=>{e.target===p&&(p.style.display="none")});const H="myLibrary";function I(){try{const e=localStorage.getItem(H);return e?JSON.parse(e):[]}catch(e){return console.error("localStorage read error",e),[]}}function N(e){try{localStorage.setItem(H,JSON.stringify(e))}catch(t){console.error("localStorage write error",t)}}function C(e){return I().some(r=>Number(r.id)===Number(e))}function se(e){const t=I();t.some(r=>Number(r.id)===Number(e.id))||(t.push(e),N(t))}function ie(e){let t=I();t=t.filter(r=>Number(r.id)!==Number(e)),N(t)}function ce(){const e=document.createElement("div");e.className="modal-overlay",e.style.display="none";const t=document.createElement("div");t.className="modal",t.innerHTML=`
    <button class="modal-close" aria-label="close">×</button>
    <div class="modal-body">
      <div class="modal-content" id="modal-content"></div>
    </div>
  `,e.appendChild(t),document.body.appendChild(e);const r=t.querySelector(".modal-close"),n=()=>{e.style.display="none";const o=e.querySelector("iframe");o&&(o.src="")};return e.addEventListener("click",o=>{o.target===e&&n()}),r.addEventListener("click",n),document.addEventListener("keydown",o=>{o.key==="Escape"&&n()}),{overlay:e,modalElement:t,close:n}}const{overlay:A,modalElement:x}=ce();async function le(e){const t=e.movieId||e.id,r=x.querySelector("#modal-content");r.innerHTML='<div class="loader">Loading...</div>',A.style.display="flex";try{const n=await Q(t);if((n==null?void 0:n.length)>0){const o=n.find(a=>a.site==="YouTube")||n[0];r.innerHTML=`<iframe class="trailer-iframe" src="https://www.youtube.com/embed/${o.key}" allowfullscreen></iframe>`}else r.innerHTML='<p class="error-msg">Fragman bulunamadı.</p>'}catch{r.innerHTML='<p class="error-msg">Yükleme hatası.</p>'}}async function de(e){const t=e.movie||e,r=x.querySelector("#modal-content");r.innerHTML='<div class="loader">Loading details...</div>',A.style.display="flex";try{const n=await J(t.id),o=n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:"",a=C(n.id);r.innerHTML=`
      <div class="details-wrapper">
        <div class="details-poster"><img src="${o}" alt="${n.title}"></div>
        <div class="details-info">
          <h2 class="details-title">${n.title}</h2>
          <ul class="details-list">
             <li class="details-item"><span class="details-label">Vote / Votes</span> <span class="details-value">${n.vote_average.toFixed(1)} / ${n.vote_count}</span></li>
             <li class="details-item"><span class="details-label">Popularity</span> <span class="details-value">${n.popularity.toFixed(1)}</span></li>
             <li class="details-item"><span class="details-label">Genre</span> <span class="details-value">${n.genres.map(l=>l.name).join(", ")}</span></li>
          </ul>
          <h3 class="details-about-title">About</h3>
          <p class="details-about-text">${n.overview||"Açıklama yok."}</p>
          <div class="modal-actions">
            <button class="btn-primary" id="modal-library-btn">${a?"Remove from library":"Add to library"}</button>
          </div>
        </div>
      </div>
    `;const i=document.getElementById("modal-library-btn");i.onclick=()=>{C(n.id)?(ie(n.id),i.textContent="Add to library"):(se({id:n.id,title:n.title,poster_path:n.poster_path}),i.textContent="Remove from library")}}catch{r.innerHTML='<p class="error-msg">Detaylar yüklenemedi.</p>'}}window.addEventListener("openTrailerModal",e=>le(e.detail));window.addEventListener("openDetailsModal",e=>de(e.detail));const f="98ff2d6267ceea8e039422b0f46fb813",b="https://api.themoviedb.org/3",me="https://image.tmdb.org/t/p/w500";let M={};fetch(`${b}/genre/movie/list?api_key=${f}&language=en-US`).then(e=>e.json()).then(e=>{e.genres.forEach(t=>{M[t.id]=t.name})});function ue(e){if(!e)return"☆☆☆☆☆";const t=Math.round(e/2);return"★".repeat(t)+"☆".repeat(5-t)}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("moviesContainer"),t=document.getElementById("emptyMessage"),r=document.getElementById("yearBtn"),n=document.getElementById("yearDropdown"),o=document.getElementById("selectedYear"),a=document.querySelector(".search-input1"),i=document.querySelector(".search-btn");let l="",d="";h();function h(){fetch(`${b}/trending/movie/week?api_key=${f}`).then(s=>s.json()).then(s=>{u(s.results||[])}).catch(s=>console.error(s))}function u(s){if(e.innerHTML="",!s.length){t.hidden=!1;return}t.hidden=!0,s.forEach(c=>{const S=c.poster_path?`${me}${c.poster_path}`:"./placeholder.jpg",U=c.release_date?c.release_date.slice(0,4):"N/A",q=c.genre_ids&&Object.keys(M).length?c.genre_ids.map(Y=>M[Y]).filter(Boolean).slice(0,2).join(", "):"Unknown",P=ue(c.vote_average),v=document.createElement("a");v.className="movie-card",v.href="#",v.innerHTML=`
      <img src="${S}" alt="${c.title}">
      <div class="movie-card-overlay">
        <div class="movie-card-text">
          <h3 class="movie-title">${c.title}</h3>
          <p class="movie-meta">${q} | ${U}</p>
        </div>
        <div class="movie-card-rating">${P}</div>
      </div>
    `,e.appendChild(v)})}r&&n&&(r.addEventListener("click",s=>{s.stopPropagation(),n.classList.toggle("open")}),n.addEventListener("click",s=>{s.target.tagName==="LI"&&(l=s.target.dataset.year||"",o.textContent=s.target.textContent,n.classList.remove("open"))}),document.addEventListener("click",()=>{n.classList.remove("open")})),i&&i.addEventListener("click",()=>{if(d=a.value.trim(),!d&&!l){h();return}g()});function g(){let s;d?(s=`${b}/search/movie?api_key=${f}&query=${encodeURIComponent(d)}`,l&&(s+=`&year=${l}`)):s=`${b}/discover/movie?api_key=${f}&primary_release_year=${l}`,fetch(s).then(c=>c.json()).then(c=>{u(c.results||[])}).catch(c=>console.error(c))}});const D="98ff2d6267ceea8e039422b0f46fb813",j="https://api.themoviedb.org/3";document.getElementById("emptySection");const B=document.getElementById("movieList");document.getElementById("moviesContainer");document.getElementById("loadMoreBtn");const _=document.getElementById("emptyState");let E=1,k=null,$={};fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=98ff2d6267ceea8e039422b0f46fb813&language=en-US").then(e=>e.json()).then(e=>{e.genres.forEach(t=>{$[t.id]=t.name})});document.addEventListener("DOMContentLoaded",()=>{ge(),ye()});function ge(){fetch(`${j}/trending/movie/day?api_key=${D}`).then(e=>{if(!e.ok)throw new Error("HTTP error: "+e.status);return e.json()}).then(e=>{!e||!Array.isArray(e.results)||(B.innerHTML="",O(e.results.slice(0,9)))}).catch(e=>console.error("Initial fetch error:",e))}function pe(e){const t=Math.round(e/2);return"★".repeat(t)+"☆".repeat(5-t)}function O(e){const t=document.getElementById("movieList");e.forEach(r=>{var l;if(!r.poster_path)return;const n=((l=r.release_date)==null?void 0:l.slice(0,4))||"N/A",o=r.genre_ids&&$?r.genre_ids.map(d=>$[d]).filter(Boolean).slice(0,2).join(", "):"Unknown",a=pe(r.vote_average),i=document.createElement("article");i.className="movie-card",i.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w500${r.poster_path}" alt="${r.title}">
      <div class="movie-card-overlay">
        <div class="movie-card-text">
          <h3>${r.title}</h3>
          <p>${o} | ${n}</p>
        </div>
        <div class="movie-card-rating">${a}</div>
      </div>
    `,t.appendChild(i)})}genreDropdown.addEventListener("click",e=>{e.target.tagName==="LI"&&(k=e.target.dataset.genreId,E=1,B.innerHTML="",_.classList.add("hidden"),T())});function T(){k&&fetch(`${j}/discover/movie?api_key=${D}&with_genres=${k}&page=${E}`).then(e=>{if(!e.ok)throw new Error("HTTP error: "+e.status);return e.json()}).then(e=>{if(!e||!Array.isArray(e.results))return;const t=e.results.slice(0,9);if(!t.length&&E===1){_.classList.remove("hidden");return}O(t)}).catch(e=>console.error("Genre fetch error:",e))}function ye(){const e=document.getElementById("genreBtn"),t=document.getElementById("genreDropdown"),r=document.getElementById("genreIcon");e.addEventListener("click",n=>{n.stopPropagation(),t.classList.toggle("active"),r.classList.toggle("rotate")}),t.addEventListener("click",n=>{n.target.tagName==="LI"&&(n.target.dataset.genreId,T(),t.classList.remove("active"),r.classList.remove("rotate"))}),document.addEventListener("click",()=>{t.classList.remove("active"),r.classList.remove("rotate")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(t.classList.remove("active"),r.classList.remove("rotate"))})}genreDropdown.addEventListener("click",e=>{e.target.tagName==="LI"&&(k=e.target.dataset.genreId,E=1,B.innerHTML="",_.classList.add("hidden"),T())});
//# sourceMappingURL=main-DFR1D_mr.js.map
